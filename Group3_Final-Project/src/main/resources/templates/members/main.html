<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/fragments/header :: header}"></head>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" defer></script>
<body class="g-sidenav-show  bg-gray-100">
<!--   사이드 : aside -->
<aside th:replace="/fragments/aside"></aside>
<main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
  <!-- body Top Navbar : bodyTop  -->
  <nav th:replace="fragments/bodyTop"></nav>
  <!-- Start Content -->
  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-12">
        <div class="card mb-4" style="height: 100vh;">
          <div class="card-header pb-0">
            <h6>사원 목록</h6>
          </div>
          <div class="card-body px-0 pt-0 pb-2">
            <div class="table-responsive p-0">
              <table class="table align-items-center mb-0">
                <thead>
                <tr>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">AUTHOR</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">POSITION</th>
                  <!--                  생략 가능-->
                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</th>
<!--                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Employed</th>-->
<!--                  <th class="text-secondary opacity-7"></th>-->
                </tr>
                </thead>
                <tbody>
<!--                Start 사원 정보 : 이름 클릭하면 , Modal > 상세정보 -->
                <tr th:each="member:${memberList}">
                  <td>
                    <div class="d-flex px-2 py-1">
                        <img class="avatar avatar-sm me-3" th:src="@{'/' + ${member.getMem_img()}}">
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="member-name mb-0 text-sm" data-bs-toggle="modal" data-bs-target="#exampleModal" th:text="${member.getMem_name()}">이름</h6>   <!-- 이름 -->
                        <p class="text-xs text-secondary mb-0" th:text="${member.getEmail()}">이메일</p>  <!-- 이메일 -->
                        <p class="member-id text-xs text-secondary mb-0" th:text="${member.getId()}">사원 번호</p> <!-- 사원 번호 -->
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class="text-xs font-weight-bold mb-0" th:text="${member.getTeam().getTeam_name()}">부서</p>  <!-- 부서 -->
                    <p class="text-xs text-secondary mb-0" th:text="${member.getEmp_type()}">직급</p> <!-- 직급 -->
                  </td>
<!--                  생략 가능-->
                  <td class="align-middle text-center text-sm">
                    <span class="badge badge-sm bg-gradient-success">Online</span> <!-- 출 퇴근 상태 -->
                  </td>
<!--                  <td class="align-middle text-center">-->
<!--                    <span class="text-secondary text-xs font-weight-bold">23/04/18</span>-->
<!--                  </td>-->
<!--                  <td class="align-middle">-->
<!--                    <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">-->
<!--                      Edit-->
<!--                    </a>-->
<!--                  </td>-->
                </tr>
<!--                End 사원 정보 --->
                <tr>
                  <td>
                    <div class="d-flex px-2 py-1">
                      <div>
                        <img src="../assets/img/team-3.jpg" class="avatar avatar-sm me-3" alt="user2">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">Alexa Liras</h6>
                        <p class="text-xs text-secondary mb-0">alexa@creative-tim.com</p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class="text-xs font-weight-bold mb-0">Programator</p>
                    <p class="text-xs text-secondary mb-0">Developer</p>
                  </td>
                  <td class="align-middle text-center text-sm">
                    <span class="badge badge-sm bg-gradient-secondary">Offline</span>
                  </td>
                  <td class="align-middle text-center">
                    <span class="text-secondary text-xs font-weight-bold">11/01/19</span>
                  </td>
                  <td class="align-middle">
                    <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                      Edit
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex px-2 py-1">
                      <div>
                        <img src="../assets/img/team-4.jpg" class="avatar avatar-sm me-3" alt="user3">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">Laurent Perrier</h6>
                        <p class="text-xs text-secondary mb-0">laurent@creative-tim.com</p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class="text-xs font-weight-bold mb-0">Executive</p>
                    <p class="text-xs text-secondary mb-0">Projects</p>
                  </td>
                  <td class="align-middle text-center text-sm">
                    <span class="badge badge-sm bg-gradient-success">Online</span>
                  </td>
                  <td class="align-middle text-center">
                    <span class="text-secondary text-xs font-weight-bold">19/09/17</span>
                  </td>
                  <td class="align-middle">
                    <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                      Edit
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex px-2 py-1">
                      <div>
                        <img src="../assets/img/team-3.jpg" class="avatar avatar-sm me-3" alt="user4">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">Michael Levi</h6>
                        <p class="text-xs text-secondary mb-0">michael@creative-tim.com</p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class="text-xs font-weight-bold mb-0">Programator</p>
                    <p class="text-xs text-secondary mb-0">Developer</p>
                  </td>
                  <td class="align-middle text-center text-sm">
                    <span class="badge badge-sm bg-gradient-success">Online</span>
                  </td>
                  <td class="align-middle text-center">
                    <span class="text-secondary text-xs font-weight-bold">24/12/08</span>
                  </td>
                  <td class="align-middle">
                    <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                      Edit
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex px-2 py-1">
                      <div>
                        <img src="../assets/img/team-2.jpg" class="avatar avatar-sm me-3" alt="user5">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">Richard Gran</h6>
                        <p class="text-xs text-secondary mb-0">richard@creative-tim.com</p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class="text-xs font-weight-bold mb-0">Manager</p>
                    <p class="text-xs text-secondary mb-0">Executive</p>
                  </td>
                  <td class="align-middle text-center text-sm">
                    <span class="badge badge-sm bg-gradient-secondary">Offline</span>
                  </td>
                  <td class="align-middle text-center">
                    <span class="text-secondary text-xs font-weight-bold">04/10/21</span>
                  </td>
                  <td class="align-middle">
                    <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                      Edit
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <div class="d-flex px-2 py-1">
                      <div>
                        <img src="../assets/img/team-4.jpg" class="avatar avatar-sm me-3" alt="user6">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">Miriam Eric</h6>
                        <p class="text-xs text-secondary mb-0">miriam@creative-tim.com</p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <p class="text-xs font-weight-bold mb-0">Programtor</p>
                    <p class="text-xs text-secondary mb-0">Developer</p>
                  </td>
                  <td class="align-middle text-center text-sm">
                    <span class="badge badge-sm bg-gradient-secondary">Offline</span>
                  </td>
                  <td class="align-middle text-center">
                    <span class="text-secondary text-xs font-weight-bold">14/09/20</span>
                  </td>
                  <td class="align-middle">
                    <a href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                      Edit
                    </a>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>


          <!-- Modal -->
          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">정보</h5>
                </div>
                <div class="modal-body">
                  <table style="width: 100%">
                    <tr>
                      <td>사원 번호</td>
                      <td id="modal-id"></td>
                    </tr>
                    <tr>
                      <td>사원 I D</td>
                      <td id="modal-mem_id"></td>
                    </tr>
                    <tr>
                      <td>이름</td>
                      <td id="modal-name"></td>
                    </tr>
                    <tr>
                      <td>성별</td>
                      <td id="modal-gender"></td>
                    </tr>
                    <tr>
                      <td>부서</td>
                      <td id="modal-team"></td>
                    </tr>
                    <tr>
                      <td>직급</td>
                      <td id="modal-emp_type"></td>
                    </tr>
                    <tr>
                      <td>Email</td>
                      <td id="modal-email"></td>
                    </tr>
                    <tr>
                      <td>사내 번호</td>
                      <td id="modal-inline_tel"></td>
                    </tr>
                    <tr>
                      <td>생일</td>
                      <td id="modal-birthday"></td>
                    </tr>
                    <tr>
                      <td>입사일</td>
                      <td id="modal-reg_date"></td>
                    </tr>
                  </table>
                </div>
                <div class="modal-footer justify-content-between">
                  <button type="button" class="btn bg-gradient-dark" data-bs-dismiss="modal">Close</button>
                  <button type="button" class="btn bg-gradient-primary">Save changes</button>
                </div>
              </div>
            </div>
          </div>


      <div><a href="pages/login">login</a></div>
  </div>
</main>

<!-- modal script  -->
<script>
  window.onload = function() {
    let memberId = document.querySelectorAll('.member-id');
    let memberName = document.querySelectorAll('.member-name');
    for(let i=0; i<memberId.length; i++){
      memberName[i].addEventListener('click',()=>{
         // alert(memberId[i].textContent);
        let data = memberId[i].textContent;

        $.ajax({
          url:"/members/main",
          type:"POST",
          data: {id:data},
          datatype:"json",
          success:function (x) {
            $("#exampleModalLabel").text(x[2] + " 사원 정보");
            $("#modal-id").text(x[0]);
            $("#modal-mem_id").text(x[1]);
            $("#modal-name").text(x[2]);
            $("#modal-gender").text(x[3]);
            $("#modal-team").text(x[4]);
            $("#modal-emp_type").text(x[5]);
            $("#modal-email").text(x[6]);
            $("#modal-inline_tel").text(x[7]);
            $("#modal-birthday").text(x[8]);
            $("#modal-reg_date").text(x[9]);
          },
          error:function (x){
            alert("err");
          }
        });
      });
    }
  };


</script>
</body>

</html>