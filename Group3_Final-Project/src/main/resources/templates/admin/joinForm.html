<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<head th:replace="~{/fragments/header :: header}"></head>

<!--<script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
<script src="http://code.jquery.com/jquery.min.js"></script>-->

<body class="g-sidenav-show  bg-gray-100">
<!--   사이드 : aside -->
<aside th:replace="/fragments/aside"></aside>
<main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- body Top Navbar : bodyTop  -->
    <nav th:replace="fragments/bodyTop"></nav>
    <!-- Start Content -->
    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <div class="card px-4" style="height: 85vh">
                    <div class="card-header pb-0">
                        <h6 class="fw-bold" style="float: left">사원 등록</h6>
                    </div>
                    <form action="/members/addmember" method="post" th:object="${MemberDTO}">

                        <div class="alert" th:if="${not #strings.isEmpty(msg)}">
                            <strong th:text="${msg}"> </strong>
                        </div>

                        <div class="row row-cols-1 row-cols-md-2 g-3">
                            <!--왼쪽 섹션-->
                            <div class="card-body px-3 border-end" >
                                <div class="mb-3">
                                    <label>사원명</label>
                                    <input type="text" class="form-control" placeholder="Name" name="name"/>
                                </div>
                                <div class="mb-3">
                                    <label>사진</label>
                                    <input type="file" class="form-control" id="inputGroupFile04">
                                </div>
                                <div class="mb-3">
                                    <label>아이디</label>
                                    <input type="text" class="form-control" placeholder="Id" name="id"/>
                                </div>
                                <div class="mb-3">
                                    <label>비밀번호</label>
                                    <input type="text" class="form-control" placeholder="Password" name="pw" />
                                </div>
                                <div class="mb-3">
                                    <label>생일</label>
                                    <input type="date" class="form-control" placeholder="Birthday" name="birthday"/>
                                </div>
                                <div class="mb-3">
                                    <label>
                                        <input style="accent-color:#252a47" type="radio" name="gender" value="male" checked />
                                        남성
                                    </label>
                                    <label>
                                        <input style="accent-color:#252a47" type="radio" name="gender" value="female" />
                                        여성
                                    </label>
                                </div>
                            </div>
                            <!--오른쪽 섹션-->
                            <div class="card-body px-3">
                                <div class="mb-3">
                                    <label>휴대폰 번호</label>
                                    <input type="text"  class="form-control" placeholder="HP" name="HP" />
                                </div>
                                <div class="mb-3">
                                    <label>회사 번호</label>
                                    <input type="text" class="form-control" placeholder="Phone" name="phone" />
                                </div>
                                <div class="mb-3">
                                    <label>이메일</label>
                                    <input type="email" class="form-control" placeholder="Email" name="email" aria-describedby="email-addon" />
                                </div>
                                <div class="mb-3">
                                    <label>주소</label>
                                    <input type="text" class="form-control" placeholder="Address" id="address_kakao" name="address" readonly onclick="popup()" />

                                    <input type="text" id="address_name" name="address_name" hidden="hidden" />
                                    <input type="text" id="address_road" name="address_road" hidden="hidden" />
                                </div>
                                <div class="mb-3">
                                    <input type="image" class="form-control" placeholder="Name" name="testtest"/>
                                </div>
                                <div class="mb-3">
                                    <input type="text" class="form-control" placeholder="Name" />
                                </div>
                                <div class="mb-3">
                                    <input type="text" class="form-control" placeholder="Name" />
                                </div>
                                <div class="text-center">
                                    <button type="button" class="btn bg-gradient-dark w-100 my-4 mb-2">사원 등록</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
<!--   Core JS Files   -->
<!--<script src="../assets/js/core/popper.min.js"></script>
<script src="../assets/js/core/bootstrap.min.js"></script>
<script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
<script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
<script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
        var options = {
            damping: '0.5'
        }
        Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
</script>
&lt;!&ndash; Github buttons &ndash;&gt;
<script async defer src="https://buttons.github.io/buttons.js"></script>
&lt;!&ndash; Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc &ndash;&gt;
<script src="../assets/js/soft-ui-dashboard.min.js?v=1.0.7"></script>-->
<!-- plugin -->

<script>
    let CheckEmail = false;
    function popup(){
        new daum.Postcode({
            oncomplete: function(data) { //선택시 입력값 세팅
                let location =  data.address; // 주소 넣기
                let arr = location.split(' '); //주소 - 도로명 쪼깨기 . ex) 경기 시흥시 - 정왕대로 56번길
                document.getElementById("address_name").value = arr[0]+arr[1];
                document.getElementById("address_road").value = arr[2]+arr[3];
                document.getElementById("address_kakao").value = data.address; // 주소 넣기 (보이는거)
                /*document.querySelector("input[name=testtest]").focus(); //상세입력 포커싱*/
            }
        }).open();
    }

    $('#checkEmail').click(function() {
        let email = $('#memail').val();

        $.ajax({
            type : "POST",
            url : "/members/mailConfirm",
            data : {
                "email" : email
            },
            success : function(data){
                alert("해당 이메일로 인증번호 발송이 완료되었습니다. \n 확인부탁드립니다.")
                //console.log("data : "+data); 자바에서 생성된 코드 확인
                if($('#memail').val() == data){ //랜덤코드랑 입력코드랑 일치하면
                    alert("인증확인 되었습니다.")
                    CheckEmail = true; //이메일 확인 true로 .
                }
            }
        })
    })
</script>

</body>
</html>