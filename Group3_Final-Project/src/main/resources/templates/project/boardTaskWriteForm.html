<!--업무게시판 작성 양식-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>새 업무</title>
</head>
<body>
    <div>
        <form>
            <h3>새 업무 작성</h3>
            <div class="form-group" th:object="${boardTaskDTO}">
                <div class="form-group">
                    <label th:for="boardTitle">제목</label>
                    <input type="text" id="boardTitle" th:field="*{boardTitle}" placeholder="제목을 입력하다.">
                </div>
                <div class="form-group">
                    <label th:for="boardContent">내용</label>
                    <textarea id="boardContent" th:field="*{boardContent}" placeholder="내용을 입력하다."></textarea>
                </div>
                <div class="form-group">
                    <label th:for="responsibleMemNum">사원번호</label>
                    <input type="text" id="responsibleMemNum" th:field="*{responsibleMemNum}" placeholder="담당자를 입력하다.">
                </div>
                <div class="form-group">
                    <label th:for="responsibleMemNum">팀번호</label>
                    <input type="text" id="teamNum" th:field="*{teamNum}" placeholder="참조부서를 입력하다.">
                </div>
                <div class="form-group">
                    <label th:for="startDate">업무시작일</label>
                    <input type="date" id="startDate" th:field="*{startDate}" placeholder="시작일을 입력하다.">
                </div>
                <div class="form-group">
                    <label th:for="endDate">업무종료일</label>
                    <input type="date" id="endDate" th:field="*{endDate}" placeholder="종료일을 입력하다.">
                </div>
            </div>
            <button type="button" onclick="submitForm()">등록하다</button>
        </form>
    </div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    // function submitForm() {
    //     let memberId=$("#memberId").val();
    //     let boardContent=$("#boardContent").val();
    //     let startDate=$("#startDate").val();
    //     let endDate=$("#endDate").val();
    //     let deduction=$("#deduction").val();
    //     $.ajax({
    //         url:"/board/newtaskboard",
    //         type:"POST",
    //         data:{"memberId":memberId,"boardContent":boardContent ,"startDate":startDate,"endDate":endDate,"deduction" : deduction},
    //         success: function (taskdata) {
    //             alert("업무가 성공적으로 등록되다.");
    //             self.close();
    //             opener.location.reload();
    //         },
    //         error:function(request,status,error){
    //             alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
    //             console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
    //             self.close();
    //         }
    //     })
    // }
    function submitForm() {
        let boardTitle=$("#boardTitle").val();
        let boardContent=$("#boardContent").val();
        let responsibleMemNum=$("#responsibleMemNum").val();
        let teamNum=$("#teamNum").val();
        let startDate=$("#startDate").val();
        let endDate=$("#endDate").val();

        $.ajax({
            url: "/board/newtaskboard",
            type: "POST",
            data:{"boardTitle":boardTitle,"boardContent":boardContent,"responsibleMemNum":responsibleMemNum,"teamNum":teamNum,"startDate":startDate,"endDate":endDate},
            success: function (taskdata) {
                alert("업무가 성공적으로 등록되다.");
                self.close();
                opener.location.reload();
            },
            error: function (request, status, error) {
                alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                console.log("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                self.close();
            }
        });
    }

</script>

<style>
    body {
        font-family: 'Noto Sans KR', sans-serif;
        background-color: #f5f5f5;
        color: #333;
        margin: 0;
        padding: 0;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .container {
        width: 90%;
        background-color: #fff;
        padding: 40px;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        max-height: 90%;
        overflow-y: auto;
    }
    .form-group {
        margin-bottom: 20px;
    }
    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
    input, textarea {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 3px;
        font-size: 14px;
        color: #333;
        resize: none;
    }
    textarea {
        height: 100px;
        max-width: 100%;
    }
    button {
        width: 100%;
        padding: 12px;
        background-color: #007BFF;
        border: none;
        border-radius: 3px;
        color: #fff;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    button:hover {
        background-color: #0056b3;
    }
</style>

</body>
</html>